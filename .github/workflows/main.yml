# name: Deploy API on push to main
 
# on:
#   push:
#     branches: [ main ]
 
# jobs:
#   deploy:
#     runs-on: self-hosted
#     steps:
#       - name: Deploy Lifelog API
#         uses: shimataro/ssh-key-action@v2
#         with:
#           host: ${{ secrets.SSH_HOST }}
#           username: ${{ secrets.SSH_USERNAME }}
#           key: ${{ secrets.SSH_KEY }}
#           script: |
#             cd /var/www/api.lifelog/ # navigate into the folder
#             git pull origin main # pull from the 'main' branch
#             npm ci # install dependencies 
#             npm run build # build from TypeScript
#             pm2 restart ecosystem.config.js # start as a background service.

name: remote ssh command
on:
  push:
    branches: [ main ]

jobs:
  build:
    name: Build
    runs-on: self-hosted
    steps:
    - name: executing remote ssh commands using password
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.SSH_HOST }}
        username: ${{ secrets.SSH_USERNAME }}
        key: ${{ secrets.SSH_KEY }}
        port: 22
        script: neofetch